<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sample Document</title>
    <script type="application/javascript">
        function getByClassName(ClassName){
            if(document.getElementsByClassName){
                return document.getElementsByClassName(ClassName);
            }else{
                var aEle=document.getElementsByTagName('*');
                var arr=[];
                for(var i=0;i<aEle.length;i++){
                    if(aEle[i].className==ClassName){
                        arr.push(aEle[i])
                    }
                }
                return arr;
            }
        }

        function parent(e, n){
            if(n === undefined) n = 1;
            while(n-- && e) e = e.parentNode;
            if(!e || e.nodeType !== 1) return null;
            return e;
        }

    </script>
</head>
<body>
    <div id="editor" contenteditable>
        Click to edit
    </div>

    <h1 class="apple banana">An HTML Document</h1>
    <p class="apple">This is a <i class="banana">simple</i> document.</p>

    <form name="city">
        <label>请选择你所在的城市：
            <select name="selectedCity" multiple="true" size="2">
                <option name="city" value="suzhou">苏州</option>
                <option name="city" value="jingzhou">荆州</option>
            </select>
        </label>
    </form>


</body>

<script type="application/javascript">

    var elements =  getByClassName("apple");
    console.log(elements[1].innerText);

    // var pElements = document.getElementsByTagName("p");
    // console.log(pElements);

    var select = document.forms.city.elements.selectedCity
    console.log(select);


    var whenReady = (function() { // This function returns the whenReady() function
        var funcs = [];    // The functions to run when we get an event
        var ready = false; // Switches to true when the handler is triggered

        // The event handler invoked when the document becomes ready
        function handler(e) {
            // If we've already run once, just return
            if (ready) return;

            // If this was a readystatechange event where the state changed to
            // something other than "complete", then we're not ready yet
            if (e.type === "readystatechange" && document.readyState !== "complete")
                return;

            // Run all registered functions.
            // Note that we look up funcs.length each time, in case calling
            // one of these functions causes more functions to be registered.
            for(var i = 0; i < funcs.length; i++)
                funcs[i].call(document);

            // Now set the ready flag to true and forget the functions
            ready = true;
            funcs = null;
        }

        // Register the handler for any event we might receive
        if (document.addEventListener) {
            document.addEventListener("DOMContentLoaded", handler, false);
            document.addEventListener("readystatechange", handler, false);
            window.addEventListener("load", handler, false);
        }
        else if (document.attachEvent) {
            document.attachEvent("onreadystatechange", handler);
            window.attachEvent("onload", handler);
        }

        // Return the whenReady function
        return function whenReady(f) {
            if (ready) f.call(document); // If already ready, just run it
            else funcs.push(f);          // Otherwise, queue it for later.
        }
    }());

    whenReady(function(){console.log("f1")});
    whenReady(function(){console.log("f2")});
    whenReady(function(){console.log("f3")});
    whenReady(function(){console.log("f4")});
    whenReady(function(){console.log("f5")});

</script>
</html>